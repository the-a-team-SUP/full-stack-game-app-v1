(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{162:function(e,t,n){e.exports=n(321)},167:function(e,t,n){},178:function(e,t){},180:function(e,t){},217:function(e,t){},218:function(e,t){},300:function(e,t){},320:function(e,t,n){},321:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),s=n(54),c=n.n(s),u=(n(167),n(77)),i=n(28),l=(n(83),n(78)),m=n.n(l),p=n(153),d=n(15),g=n(16),f=n(18),E=n(17),h=n(19),b=n(7),O=n(155),v=n.n(O),y=n(156),j=n.n(y),I=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={message:""},n.addToStore=function(e){try{var t=j.a.verify(e,"mysecretkey"),a=t.name,r=t.picture,o=t.userID,s=t.email,c=a.split(" ")[0];localStorage.setItem("token",e),n.props.addUserToStore({name:a,email:s,picture:r,firstName:c,userID:o,authenticated:!0})}catch(u){console.log(u)}},n.loginBtnClicked=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("message"),console.log("login btn clicked");case 2:case"end":return e.stop()}}),e)}))),n.componentDidMount=function(){var e=localStorage.getItem("token"),t=localStorage.getItem("message");if(n.setState({message:t}),e)n.addToStore(e);else{var a=v.a.parse(window.location.search,{ignoreQueryPrefix:!0}).token;a&&n.addToStore(a)}},n}return Object(h.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e;return e=this.props.loggedInUsers[0]&&this.props.loggedInUsers[0].authenticated?this.props.history.push("/list"):o.a.createElement("div",null,o.a.createElement("section",{id:"showcase"},o.a.createElement("div",{className:"main"},o.a.createElement("img",{alt:"Facebook Logo",src:"".concat("","Asserts/Images/gamelogo.png"),className:"logo"}),o.a.createElement("h2",{className:"highlight"},"full-stack-game-app-v1"),o.a.createElement("p",null,"full-stack-game-app-v1 is a coolest game ever !! This is a coolest Multiple choice game or objective response is a form of an objective assessment in which respondents are asked to select only correct answers from the choices offered as a list. The multiple choice format is most frequently used in educational testing, in market research, and in elections, when a person chooses between multiple candidates or parties."),o.a.createElement("h3",null,this.state.message||this.props.message),o.a.createElement("a",{href:"https://express-react-redux-game.herokuapp.com/api/auth/facebook"},o.a.createElement("button",{className:"button",onClick:this.loginBtnClicked},"Login With Facebook"))))),o.a.createElement("div",null,e)}}]),t}(r.Component),U=Object(b.b)((function(e){return{loggedInUsers:e.user.loggedInUsers,message:e.user.message}}),(function(e){return{addUserToStore:function(t){e({type:"LOGIN_USER",newUser:t})}}}))(I),k=n(22),D=n(4),S=n(21),_=n.n(S),G="https://express-react-redux-game.herokuapp.com",T=n(27),N=n.n(T),A=function(e){return{type:"UPDATE_GAME_SCORE",payload:e}},L=function(e,t){return t.map((function(t){return e===t.userId?Object(D.a)({},t,{score:++t.score}):t}))},w=function(e){var t=e.questionId,n=e.choises,a=e.socket,r=e.selectedGame,s=e.myData,c=Object(b.c)(),u=n.map((function(e,n){var u=JSON.parse(e);return o.a.createElement("div",{key:n},o.a.createElement("input",{type:"radio",name:t,value:u.isCorrect,onClick:function(){return function(e){if(e){var t=L(s.userID,r.users);c(A(t)),a.emit("scoreFromClient",{userId:s.userID,gameId:r.id})}}(u.isCorrect)},required:!0}),o.a.createElement("label",{for:t},u.answer))}));return o.a.createElement("div",null,u)},C=function(e){var t=e.questions,n=e.myData,s=Object(b.c)(),c=Object(b.d)((function(e){return e.game})).game;a=_()(G),Object(r.useEffect)((function(){a.on("scoreFromServer",(function(e){if(c.id===e.gameId){var t=L(e.userId,c.users);s(A(t))}})),a.on("serverEndGame",(function(e){c.id===e.id&&s(function(e){return{type:"END_GAME_TO_ALL",payload:e}}(e))}))}),[G]);var u=!!t.length&&t.map((function(e,t){return o.a.createElement("div",{key:t},o.a.createElement("p",null,o.a.createElement("b",null,t+1,". "),e.content),o.a.createElement(w,{questionId:e.id,choises:e.choises,socket:a,selectedGame:c,myData:n}))})),i=o.a.createElement("input",{type:"submit",value:"Submit"});u||(i=null);return o.a.createElement("form",{onSubmit:function(e){var t;e.preventDefault(),s((t=c,_()(G).emit("clientEndGame",t,(function(){})),function(e){e({type:"END_GAME",payload:"done"})}))}},o.a.createElement("h2",null,"Game Questions"),u,i)},R=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.users,t=e.length?e.map((function(e,t){return o.a.createElement("div",{className:"users",key:t},o.a.createElement("p",null,o.a.createElement("img",{src:e.picture,alt:"profilePic"})),o.a.createElement("b",null,o.a.createElement("p",null,e.userame)),o.a.createElement("p",null,e.email))})):o.a.createElement("div",null,o.a.createElement("p",null," No user is online yet"));return o.a.createElement("div",null,t)}},{key:"componentDidMount",value:function(){}}]),t}(r.Component),x=Object(b.b)((function(e){return{users:e.user.onlineUsers}}))(R),M=function(e){var t=e.scoreList,n=e.usersList,a=t.sort((function(e,t){return t.score-e.score})).map((function(e,t){var a,r=(a=e.userId,n.find((function(e){return e.userID==a})));return o.a.createElement("div",{className:"scores",key:t},o.a.createElement("br",null),o.a.createElement("hr",null),o.a.createElement("br",null),o.a.createElement("img",{src:r.picture||null,alt:"profile"}),o.a.createElement("p",null,o.a.createElement("b",null,r.name)),o.a.createElement("p",null,r.email||null),o.a.createElement("p",{className:"score"},o.a.createElement("b",null,e.score,"/5")),o.a.createElement("br",null))}));return o.a.createElement("div",null,o.a.createElement("h2",null,"Game Score"),a)},q=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(g.a)(t,[{key:"removeToken",value:function(){return localStorage.removeItem("token")}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("button",{className:"btn",onClick:function(){0!==e.props.loggedInUsers.length&&(e.props.logoutThisUser(e.props.loggedInUsers[0].userID),e.removeToken(),e.props.history.push("/"))}},o.a.createElement("i",{className:"fa fa-sign-out"}," ")," Logout"))}}]),t}(r.Component),F=Object(b.b)((function(e){return{loggedInUsers:e.user.loggedInUsers}}),(function(e){return{logoutThisUser:function(t){e(function(e){return function(t){return N.a.post("https://express-react-redux-game.herokuapp.com/api/facebooklogout",{userID:e}).then((function(n){t({type:"LOGOUT_USER",user:e,serverData:n})})).catch((function(n){return t({type:"LOGOUT_USER",user:e,serverData:n})}))}}(t))}}}))(Object(i.f)(q)),H=function(e){var t=e.userData;return o.a.createElement("div",null,o.a.createElement("img",{src:t.picture||null,alt:t.name}),o.a.createElement("b",null,o.a.createElement("p",null,t.name)),o.a.createElement("p",null,t.email||null))},Q=function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){localStorage.getItem("token")||this.props.history.push("/")}},{key:"render",value:function(){var e,t=this.props.question.questions,n=this.props.game,a=n.game,r=n.isGameOpen,s=this.props.users,c=s.loggedInUsers,u=s.onlineUsers,i=function(e,t){var n;return e.map((function(e,a){a===t&&(n=e)})),Object(D.a)({},n)},l=[].concat(Object(k.a)(u),[c[0]]);return e="done"===r?o.a.createElement(M,{scoreList:a.users,usersList:l}):a.users.length>4?o.a.createElement(C,{questions:t,myData:i(c,0)}):o.a.createElement("p",null,"Wait for 5 users, please."),o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",null,o.a.createElement("h4",null,"Online Users"),o.a.createElement(x,null),o.a.createElement("br",null)),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"userSide"},o.a.createElement(F,{history:this.props.history}),o.a.createElement(H,{userData:i(c,0)}),o.a.createElement("hr",null),o.a.createElement("div",null,e))))}}]),t}(r.Component),J=Object(b.b)((function(e){return{question:e.question,users:e.user,game:e.game}}),(function(e){return{}}))(Q),B=n(158),P=n.n(B),W=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).loginBtnClicked=function(){console.log("login btn clicked")},n.facebookResponse=function(e){if("unknown"!==e.status){var t=e.name,a=e.picture,r=e.userID,o=e.email;n.props.addUserToStore({name:t,email:o,picture:a,userID:r,authenticated:!0}),n.props.history.push("/list")}},n}return Object(h.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e;return e=o.a.createElement(P.a,{appId:"853316458415497",autoLoad:!0,fields:"name, picture, email",onClick:this.loginBtnClicked,callback:this.facebookResponse}),o.a.createElement("div",null,e)}}]),t}(r.Component),K=Object(b.b)((function(e){return{loggedInUsers:e.loggedInUsers}}),(function(e){return{addUserToStore:function(t){return e({type:"LOGIN_USER",newUser:t})}}}))(W),V=(n(320),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(E.a)(t).call(this,e))).fecthLoggedInUsers=function(){N.a.get("https://express-react-redux-game.herokuapp.com/api/loggedinusers").then((function(e){n.props.addFetchedUsers(e.data.data)})).catch((function(e){}))},n.joinGameButtonHandler=function(e){var t=n.props,a=(t.history,t.joinGameHandler),r=t.users;t.gameToCheck;e.users.push({userId:r[0].userID,score:0}),a(e)},n.createGameButtonHandler=function(){var e=n.props,t=(e.history,e.createGameHandler),a=e.users;t({userID:a[0].userID,name:a[0].name})},n}return Object(h.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.fecthLoggedInUsers();var t=this.props,n=t.history,a=t.updateGame,r=t.updateGameList,o=t.addJoinedUser,s=(t.game,_()("https://express-react-redux-game.herokuapp.com/"));s.on("gameCreated",(function(e){r(e),a(e),e.users.length>=5&&s.emit("join-room",e.id)})),s.on("joinSuccess",(function(e){o(e),e.users.length>=5&&s.emit("join-room",e.id)})),s.on("QuestionsFromServer",(function(t){e.props.game.id===t.gameId&&e.props.getQuestions(t.questions)})),s.on("alreadyJoined",(function(e){alert("You are already in the game",e)})),s.on("redirect",(function(e){n.push("/landing")}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,a=t.gameList;t.users[0]||n.push("/");var r=a.map((function(t,n){return o.a.createElement("li",{key:n},o.a.createElement("p",null,"GameId : ",t.id," with ",t.users.length," participants ",o.a.createElement("button",{onClick:function(){return e.joinGameButtonHandler(t)}},"Join Game")))}));return o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"center-div"},o.a.createElement("div",{className:"games"},o.a.createElement(F,{history:this.props.history}),o.a.createElement("h2",null,"All available games"),o.a.createElement("ul",null,r)),o.a.createElement("div",{className:"buttons"},o.a.createElement("button",{onClick:this.createGameButtonHandler},"Create Game"))))}}]),t}(r.Component)),Y=Object(b.b)((function(e){return{users:e.user.loggedInUsers,game:e.game.game,gameToCheck:e.game,gameList:e.game.gameList}}),(function(e){return{createGameHandler:function(t){return e(function(e){return _()("https://express-react-redux-game.herokuapp.com/").emit("makeGame",e),function(t){t(function(e){return{type:"CREATE_GAME",payload:e}}(e))}}(t))},updateGame:function(t){return e(function(e){return{type:"UPDATE_GAME",payload:e}}(t))},updateGameList:function(t){return e(function(e){return{type:"UPDATE_GAMELIST",payload:e}}(t))},joinGameHandler:function(t){return e(function(e){return _()("https://express-react-redux-game.herokuapp.com/").emit("joinRoom",e),function(t){t(function(e){return{type:"JOIN_GAME",payload:e}}(e))}}(t))},addJoinedUser:function(t){return e(function(e){return{type:"ADD_JOINED_USER",payload:e}}(t))},getQuestions:function(t){return e({type:"RETRIEVE_QUESTIONS_REQUEST",payload:t})},addFetchedUsers:function(t){return e({type:"ADD_FETCHED_USERS",users:t})}}}))(V);var $=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(u.a,null,o.a.createElement(i.c,null,o.a.createElement(i.a,{path:"/",exact:!0,component:U}),o.a.createElement(i.a,{path:"/login",exact:!0,component:K}),o.a.createElement(i.a,{path:"/landing",exact:!0,component:J}),o.a.createElement(i.a,{path:"/list",exact:!0,component:Y}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=n(26),X=n(159),Z=n(160),ee=n(161),te=n.n(ee),ne={loading:!1,questions:[],error:""},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_QUESTIONS_REQUEST":return Object(D.a)({},e,{questions:t.payload});case"RETRIEVE_QUESTIONS_REQUEST":return Object(D.a)({},e,{questions:Object(k.a)(t.payload)});case"FETCH_QUESTIONS_LOADING":return Object(D.a)({},e,{loading:!e.loading});case"FETCH_QUESTIONS_ERROR":return Object(D.a)({},e,{error:t.payload});default:return e}},re={loggedInUsers:[],message:" ",onlineUsers:[]},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;if("LOGIN_USER"===t.type){var n=t.newUser,a=[].concat(Object(k.a)(e.loggedInUsers),[n]);return Object(D.a)({},e,{loggedInUsers:a})}if("ADD_LOGGEDIN_USER_FROM_SOCKET"===t.type)return Object(D.a)({},e,{onlineUsers:[].concat(Object(k.a)(e.onlineUsers),[t.newUser])});if("ADD_FETCHED_USERS"===t.type){var r=t.users.filter((function(t){return t.userID!==e.loggedInUsers[0].userID.toString()}));return Object(D.a)({},e,{onlineUsers:Object(k.a)(r)})}if("LOGOUT_USER"===t.type){var o=t.user,s=e.loggedInUsers.filter((function(e){return localStorage.setItem("message",t.serverData.data.message),e.userID!==o}));return Object(D.a)({},e,{loggedInUsers:s,message:t.serverData.data.message})}return e},se={loading:!1,gameList:[],game:{id:1,users:[]},error:"",isGameOpen:!1},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_GAME":return Object(D.a)({},e,{game:t.payload,isGameOpen:"pending"});case"UPDATE_GAMELIST":return Object(D.a)({},e,{gameList:[].concat(Object(k.a)(e.gameList),[t.payload])});case"UPDATE_GAME":case"JOIN_GAME":return Object(D.a)({},e,{game:t.payload});case"ADD_JOINED_USER":var n=e.gameList.map((function(e){return e.id===t.payload.id&&(e.users=t.payload.users),e}));return Object(D.a)({},e,{gameList:n,game:t.payload});case"UPDATE_GAME_SCORE":return Object(D.a)({},e,{game:Object(D.a)({},e.game,{users:Object(k.a)(t.payload)})});case"END_GAME":return Object(D.a)({},e,{game:Object(D.a)({},e.game,{open:!1}),isGameOpen:t.payload});case"END_GAME_TO_ALL":return Object(D.a)({},e,{game:Object(D.a)({},e.game,{users:t.payload.users,open:!1}),isGameOpen:t.payload.gameStatus});default:return e}},ue=Object(z.combineReducers)({user:oe,question:ae,game:ce}),ie=_()("https://express-react-redux-game.herokuapp.com"),le=function(){return function(e){var t=e.dispatch;return ie.on("logged_in_user",(function(e){return t({type:"ADD_LOGGEDIN_USER_FROM_SOCKET",newUser:e})})),function(e){return function(t){return"LOGIN_USER"===t.type?(ie.emit("new_user_logged_in",t.newUser),e(t)):e(t)}}}},me=Object(z.createStore)(ue,Object(Z.composeWithDevTools)(Object(z.applyMiddleware)(te.a,X.a,le())));c.a.render(o.a.createElement(b.a,{store:me},o.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},83:function(e,t,n){}},[[162,1,2]]]);
//# sourceMappingURL=main.97a0ca56.chunk.js.map